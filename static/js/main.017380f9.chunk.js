(this["webpackJsonpreact-weather"]=this["webpackJsonpreact-weather"]||[]).push([[0],{39:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(30),s=n.n(r),i=(n(39),n(7)),o=n.n(i),u=n(10),d=n(11),l=n(8),j=n(31),b=n.n(j).a.create({baseURL:"https://api.openweathermap.org/data/2.5",params:{appid:"d32ab3ce123bede81be4d3d21624b27b"}}),p=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.get("/weather",{params:{q:t}});case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),h=n(1),m=function(){var e=Object(a.useState)({}),t=Object(d.a)(e,2),n=t[0],c=t[1],r=Object(l.g)().name,s=Object(l.f)().goBack;return Object(a.useEffect)(Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(r);case 2:t=e.sent,console.log(t),c(t.data);case 5:case"end":return e.stop()}}),e)}))),[r]),Object(h.jsxs)("div",{className:"city-page",children:[Object(h.jsx)("button",{onClick:s,className:"btn btn-outline-secondary",children:"Back"}),Object(h.jsx)("h1",{children:Object(h.jsx)("b",{children:n.name})})]})},O=n(21),f=n(34),x=function(e){var t=e.value,n=e.onChange,a=e.onSubmit;return Object(h.jsxs)("div",{className:"search",children:[Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"text",value:t,onChange:n,placeholder:"Enter your city"})}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"button",onClick:function(){return a(t)},className:"btn btn-outline-dark",children:"Search"})})]})},v=n(13),g=function(e){var t=e.card,n=e.removeCard,a=e.updateCard;return Object(h.jsxs)("div",{className:"card",children:[Object(h.jsx)("h4",{children:t.weather[0].main}),Object(h.jsx)("div",{className:"weather-icon",children:Object(h.jsx)("img",{src:"http://openweathermap.org/img/w/".concat(t.weather[0].icon,".png"),alt:"imgicon"})}),Object(h.jsx)("h3",{children:t.weather.main}),Object(h.jsx)("div",{className:"temperature",children:Object(h.jsxs)("h1",{children:[parseFloat(t.main.temp-273.15).toFixed(1),"\xb0C"]})}),Object(h.jsx)("div",{className:"location",children:Object(h.jsxs)("h3",{children:[Object(h.jsx)("i",{className:"fa fa-street-view location"})," ",t.name," |"," ",t.sys.country]})}),Object(h.jsxs)("div",{className:"card-btns",children:[Object(h.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){return n(t.id)},children:"\xd7"}),Object(h.jsx)("button",{className:"btn btn-outline-success",onClick:function(){return a(t)},children:"Update"}),Object(h.jsx)(v.b,{to:"/info/".concat(t.name),className:"btn btn-outline-primary",children:"More info"})]})]})},y=function(e){var t=e.data,n=e.removeCard,a=e.updateCard;return Object(h.jsx)("div",{className:"cards",children:t.length?null===t||void 0===t?void 0:t.map((function(e){return Object(h.jsx)(g,{card:e,removeCard:n,updateCard:a},e.name)})):Object(h.jsx)("h3",{children:"Please, enter your cities"})})},w=function(e,t){switch(t.type){case"add":return e.find((function(e){return e.id===t.payload.id}))?e:[].concat(Object(f.a)(e),[t.payload]);case"remove":return e.filter((function(e){return e.id!==t.payload.id}));case"update":return e.map((function(e){return e.id===t.payload.id?Object(O.a)(Object(O.a)({},e),t.payload):e}));default:return e}},N=function(){var e,t=Object(a.useReducer)(w,null!==(e=JSON.parse(localStorage.getItem("data")))&&void 0!==e?e:[]),n=Object(d.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)("London"),i=Object(d.a)(s,2),l=i[0],j=i[1],b=Object(a.useState)(!1),m=Object(d.a)(b,2),O=m[0],f=m[1],v=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,p(t);case 4:return n=e.sent,j(""),f(!1),e.abrupt("return",Promise.resolve(n));case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.masseage),f(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){localStorage.setItem("data",JSON.stringify(c))}),[c]),Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)("div",{className:"container",children:[Object(h.jsxs)("h2",{className:"title",children:[Object(h.jsx)("i",{className:"fa fa-cloud"}),"Weather App"]}),Object(h.jsx)(x,{value:l,onChange:function(e){return j(e.target.value)},onSubmit:function(e){e&&v(e).then((function(e){!function(e){r({type:"add",payload:e})}(e.data)}))}}),O?Object(h.jsx)("h2",{children:"Loading..."}):Object(h.jsx)(y,{data:c,removeCard:function(e){r({type:"remove",payload:{id:e}})},updateCard:function(e){console.log(e),v(null===e||void 0===e?void 0:e.name).then((function(e){!function(e){r({type:"update",payload:e})}(e)}))}})]})})};n(68);function C(){return Object(h.jsx)(v.a,{children:Object(h.jsxs)(l.c,{children:[Object(h.jsx)(l.a,{exact:!0,path:"/react-weather",component:N}),Object(h.jsx)(l.a,{path:"/info/:name",component:m})]})})}s.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(C,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.017380f9.chunk.js.map